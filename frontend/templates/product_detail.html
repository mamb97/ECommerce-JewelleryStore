
{% extends 'base.html' %}
{% block html_head %}
 <script>
        async function buynow() {
            const confirmationtext = this.document.getElementById("confirmationText")
            const buynow_button = this.document.getElementById("buy_now")
            const product_id = this.document.getElementById("product_id").innerText
            buynow_button.disabled = true;
            // fetch(`/product/purchase/${product_id}`)
            confirmationtext.innerHTML = '<p style="color: blue">Order has been placed successfully! Continue shopping...</p>'
            const sleep = ms => new Promise(r => setTimeout(r, ms));
            await sleep(1000)
            window.location.href = "../product.html"
        }
    </script>
{% endblock %}

{% block content %}

<div class="display">
    <div>
        <table>
            <th text-align="center">
                {{product.product_name}}
            </th>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <p id="product_id" hidden> {{product.product_id}}</p>
                                <img id="product_image" src="{{product.product_image}}" width="350" height="350"/>
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    <table>
                        <tr>
                            <td>
                                <div id="product_description"><p>{{product.product_description}}</p></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div id="product_price"><p>{{product.product_price}}</p></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>
                                    <button id="buy_now"
                                            onclick=buynow()>Buy Now</button>
                                    <p id="confirmationText"></p>
                                </div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
</div>

{% endblock %}
